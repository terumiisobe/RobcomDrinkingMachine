<!DOCTYPE html>
<html lang="pt-br">
    <head>
        <title>Robçom Menu</title>
        <meta charset="utf-8">
        <meta http-equiv="Content-Language" content="pt-br">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="shortcut icon" href="{{ url_for('static', filename='images/favicon.jpeg') }}" />
        <link rel="stylesheet" href="{{ url_for('static', filename='css/bootstrap.min.css') }}" />

        <style>
            .vertical-center {
                margin-bottom: 0px;
                min-height: 100%;
                min-height: 100vh;
                display: flex;
                align-items: center;
            }
        </style>
<!--========================CSS======================-->
        <link href="{{ url_for('static', filename='css/customCss.css') }}" rel="stylesheet">
<!--========================JS======================-->
        <script src="{{ url_for('static', filename='js/jquery.min.js') }}"></script>
        <script src="{{ url_for('static', filename='js/jquery.mask.min.js') }}"></script>
        <script src="{{ url_for('static', filename='js/bootstrap.min.js') }}"></script>
        <script src="{{ url_for('static', filename='js/settings.js') }}"></script>
<!--========================Externos=================-->

        
<!--=================================================-->
    <script>
    debug_const = 1;
    
    function getCookie(name) {
        var cookieValue = null;
        if (document.cookie && document.cookie != '') {
            var cookies = document.cookie.split(';');
            for (var i = 0; i < cookies.length; i++) {
                var cookie = jQuery.trim(cookies[i]);
                // Does this cookie string begin with the name we want?
                if (cookie.substring(0, name.length + 1) == (name + '=')) {
                    cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                    break;
                }
            }
        }
        return cookieValue;
    }
    var csrftoken = getCookie('csrftoken');
    function csrfSafeMethod(method) {
         // these HTTP methods do not require CSRF protection
         return (/^(GET|HEAD|OPTIONS|TRACE)$/.test(method));
    }

    $.ajaxSetup({
         beforeSend: function(xhr, settings) {
             if (!csrfSafeMethod(settings.type) && !this.crossDomain) {
                 xhr.setRequestHeader("X-CSRFToken", csrftoken);
             }
         }
    });

    
    function checkForm() {
    //var input_mesa = document.getElementById('input-mesa').value();
    //alert(input_mesa)
        alert("Requisicao enviada")
        try{
            $.ajax({
                url : "/drinkRequest", // the endpoint
                type : "POST", // http method
                data : {'tableID':"12", 'drinkID':"2"},
                success : function(data) {
                    alert("DEU BOA");
                    alert(data);
                    data = JSON.parse(data);
                    //console.log(data);
                    if (data.status == 1){
                        alert("Parabens seu drink foi recebido com sucesso e esta na fila para entrega.");
                        //window.close();
                    }
                    if (data.status == -1){
                        alert("Ops, parece que aldo deu errado (╥_╥)");
                        //window.close();
                    }
                },

                // handle a non-successful response
                error: function(data) {
                    if (debug_const == 1){
                        alert("Erro na Login Request!");
                        alert(data);
                    }
                }
            });
        }
        catch(e) {
            alert("Except na request de /drinkRequest");
            alert(e);
            //alert("OPS!\n Parece que algo de errado ocorreu (╥_╥)\n Já estamos trabalhando para resolver!");
        }
    };
    /**
     * Executed on page load.
     */
    $(document).ready(function() {


    });
    </script>
    </head>
    <style>
        .background{
            background: url("{{ url_for('static', filename='images/wallpaper.jpg') }}") no-repeat center top fixed;
            -webkit-background-size: cover;
            -moz-background-size: cover;
            -o-background-size: cover;
            background-size: cover;
        }

        .imagem{
            max-width: 90%;
            border-radius: 15px ;
            border-style: solid;
            /*border-color: dotted;*/
            max-height: 7em;
        }


    </style>
    <body>
         <div class="background">
            <div class="mascara">
                <div class="vertical-center">
                    <div class="container">
                        <div class="box-imagem">
                            <img id="logo" class="imagem" src="{{ url_for('static', filename='images/logo.png') }}">
                        </div>
                        <!-- Checa se o nevagador do cliente tem JS -->
                        <noscript>
                            <div style="float: left; width:80%;margin:80px 0 0 10%;border:1px solid silver;padding:10px;border-radius:10px;text-align:center;">
                            Para completa funcionalidade deste site é necessário habilitar o JavaScript.<br><br>
                            Aqui estão as <a href="https://www.enable-javascript.com/" target="_blank">
                            instruções de como habilitar o JavaScript no seu navegador</a>.
                            </div>
                        </noscript>
                        
                        <form onsubmit="return checkForm();"> <!-- Função JS que verificará dos dados do formulário -->
                            <div id="form" class="box-formulario" style="padding: 0 15px;">
                                <div class="box-input">
                                    <label class="titulo-input" for="input-mesa">Numero da mesa:</label>
                                    <input type="number" class="input input-mesa" id="input-mesa" name="input-mesa" required min="1" max="99" maxlength='2' placeholder="">
                                <div class="box-confirm">
                                    <input type=button onClick="return checkForm()" value="Confirmar">
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </body>
</html>

